import { FC } from "react";
import { CalendarDate, CalendarIcon, CalendarLine, CalendarStatus, ItemCalendarWrapper } from "../../styled";
import { Moment } from "moment";
import 'moment/locale/ru';
import moment from "moment";
import { TypesDate } from "../..";
moment.locale('ru')

type Keys = "START" | "END"  | "AUCTION"

const getTypesMap =(iconColor:string)=>{
    return {
        "START":{
            icon:<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_9820_63898)">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M23.9586 0.685913C23.9333 0.338196 23.6565 0.0633546 23.3099 0.0373537C21.583 -0.0926512 19.8629 0.119751 18.1768 0.635376C18.3037 1.7937 18.9029 3.04724 19.9257 4.07007C20.9608 5.10498 22.2484 5.70392 23.4274 5.81598C23.8815 4.22461 24.0968 2.52026 23.9586 0.685913ZM13.9594 10.0362C13.137 9.21369 13.137 7.87573 13.9594 7.05322C14.7819 6.23071 16.12 6.23071 16.9425 7.05322C17.765 7.87573 17.765 9.21369 16.9425 10.0362C16.12 10.8587 14.7819 10.8587 13.9594 10.0362ZM0.205956 11.3502L2.19466 9.36146C3.88601 7.67011 5.85677 7.45716 6.45315 7.83948C5.42208 9.18641 4.44851 10.6692 3.5425 12.28C2.90566 12.1167 1.95992 12.2384 0.885095 12.5266C0.57528 12.6096 0.249719 12.471 0.0942621 12.1989C-0.0650397 11.9231 -0.0188971 11.575 0.205956 11.3502ZM3.63459 16.1915C3.42054 15.9772 3.36762 15.6497 3.50349 15.3787C3.5215 15.3429 3.54706 15.2908 3.58017 15.2233L3.58023 15.2232C3.74435 14.8885 4.09382 14.1758 4.62886 13.2081L5.735 14.3145C5.7121 14.3355 5.68893 14.3519 5.66576 14.3684C5.63853 14.3877 5.61129 14.407 5.58448 14.4338C4.88227 15.1359 4.30329 15.7747 3.80653 16.3634L3.63459 16.1915ZM7.63545 20.1923C8.22084 19.6952 8.85805 19.1151 9.5619 18.4113C9.58898 18.3843 9.60842 18.3569 9.62789 18.3295L9.6279 18.3295C9.64424 18.3065 9.66059 18.2836 9.68147 18.2607L10.8398 19.4191C9.88213 19.9524 9.32344 20.2329 8.95139 20.4197L8.95117 20.4198C8.85097 20.4701 8.7643 20.5136 8.68703 20.5534C8.41512 20.6933 8.08443 20.6413 7.86836 20.4252L7.63545 20.1923ZM9.1871 14.8096C8.67898 14.3015 7.25002 14.757 6.57876 15.4281C4.33315 17.6737 3.31893 19.2658 2.86355 20.2059C2.73299 20.4752 2.78738 20.7977 2.99905 21.0093C3.21108 21.2216 3.53408 21.2754 3.80361 21.1448C4.72262 20.6986 6.29531 19.6891 8.56765 17.417C9.30575 16.6785 9.66994 15.2926 9.18764 14.8101L9.1871 14.8096ZM11.9013 23.9246C12.1721 24.0615 12.5 24.0086 12.7144 23.794L14.7033 21.8053C16.2431 20.2652 16.514 18.2781 16.1647 17.6481C14.6625 18.7802 13.1407 19.7362 11.7209 20.5366C11.8189 21.0897 11.7537 21.6264 11.522 23.1938C11.4768 23.4972 11.6336 23.7907 11.9013 23.9246ZM16.8176 1.12482C17.0469 2.49115 17.7614 3.89447 18.9314 5.06452C20.1205 6.2536 21.5676 6.96936 22.9672 7.18085C20.9437 12.3442 16.1852 16.2252 12.0979 18.6885L10.4589 17.0495C10.8989 15.9668 11.0174 14.6512 10.1815 13.8151C9.34676 12.9805 8.03059 13.0968 6.94643 13.537L5.35963 11.9502C8.55354 6.63794 12.5954 2.85645 16.8176 1.12482ZM12.9651 11.0306C14.3358 12.4012 16.5662 12.4012 17.9368 11.0306C19.3075 9.65991 19.3075 7.42951 17.9368 6.05878C16.5662 4.68823 14.3358 4.68823 12.9651 6.05878C11.5944 7.42932 11.5944 9.65991 12.9651 11.0306Z" fill={iconColor}/>
            </g>
            <defs>
            <clipPath id="clip0_9820_63898">
            <rect width="24" height="24" fill="white"/>
            </clipPath>
            </defs>
            </svg>
            ,
            text:"Начало подачи заявок"
        },
        "END":{
            icon:<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M6.375 22.5938H5.67188V1.40625C5.67188 0.629578 5.0423 0 4.26562 0C3.48895 0 2.85938 0.629578 2.85938 1.40625V22.5938H2.15625C1.76761 22.5938 1.45312 22.9082 1.45312 23.2969C1.45312 23.6855 1.76761 24 2.15625 24H6.375C6.76364 24 7.07812 23.6855 7.07812 23.2969C7.07812 22.9082 6.76364 22.5938 6.375 22.5938ZM22.4287 12.9694L19.8765 9.14062L22.4287 5.31187C22.74 4.8442 22.4032 4.21875 21.8437 4.21875H15.5156V11.9531C15.5156 12.8686 14.926 13.6418 14.1094 13.933C14.3304 14.0118 14.5648 14.0625 14.8125 14.0625H21.8437C22.4033 14.0625 22.7401 13.437 22.4287 12.9694ZM7.07812 1.40625H12C13.1632 1.40625 14.1094 2.35247 14.1094 3.51562V11.9531C14.1094 12.3418 13.7949 12.6562 13.4062 12.6562H7.07812V1.40625Z" fill={iconColor}/>
            </svg>
            ,
            text:"Окончание подачи заявок"
        },
        "AUCTION":{
            icon:<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_9820_63920)">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12.1906 0.495539L10.7766 1.90954C10.3862 2.3 10.3862 2.93307 10.7766 3.32354L16.4326 8.97954C16.8231 9.37 17.4562 9.37 17.8466 8.97954L19.2606 7.56554C19.6511 7.17507 19.6511 6.542 19.2606 6.15154L13.6046 0.495539C13.2142 0.105074 12.5811 0.105074 12.1906 0.495539ZM6.07175 8.51525C7.02515 8.121 7.90053 7.55979 8.65675 6.858C9.35666 6.10063 9.91834 5.22639 10.3163 4.275L15.485 9.44249C14.5317 9.83695 13.6563 10.3982 12.9 11.1C12.1998 11.8575 11.638 12.732 11.2403 13.6837L6.07175 8.51525ZM13.6065 11.8077C13.1406 12.3043 12.7498 12.8664 12.4468 13.4762L20.6778 21.7072C20.8653 21.8947 21.1196 22 21.3848 22C21.6499 22 21.9042 21.8947 22.0918 21.7072L23.506 20.293C23.5989 20.2001 23.6725 20.0899 23.7228 19.9686C23.7731 19.8472 23.7989 19.7172 23.7989 19.5859C23.7989 19.4545 23.7731 19.3245 23.7228 19.2032C23.6725 19.0818 23.5989 18.9716 23.506 18.8787L15.275 10.65C14.6641 10.9504 14.1017 11.3407 13.6065 11.8077ZM11.7071 19.2766C11.8946 19.4642 12 19.7185 12 19.9837V21H1.99999V19.9837C1.99999 19.7185 2.10535 19.4642 2.29289 19.2766C2.48042 19.0891 2.73478 18.9837 2.99999 18.9837H11C11.2652 18.9837 11.5196 19.0891 11.7071 19.2766ZM14 22H0V24H14V22ZM2.29137 10.3932L3.70537 8.97916C4.09583 8.58869 4.7289 8.5887 5.11936 8.97916L10.7754 14.6352C11.1658 15.0256 11.1658 15.6587 10.7754 16.0492L9.36136 17.4632C8.9709 17.8536 8.33783 17.8536 7.94736 17.4632L2.29137 11.8072C1.9009 11.4167 1.9009 10.7836 2.29137 10.3932Z" fill={iconColor}/>
            </g>
            <defs>
            <clipPath id="clip0_9820_63920">
            <rect width="24" height="24" fill="white"/>
            </clipPath>
            </defs>
            </svg>
            ,
            text:"Проведение аукциона"
        }
    }
}



const CalendarItem:FC<{date:Moment,isCalculated:boolean,type:TypesDate}> =({date,isCalculated,type})=>{
    const dateNow = moment()
    const timeHasExpired = dateNow.isAfter(date)
    const iconColor = timeHasExpired ? "red" : "#c9c9c9"
    const typesMap = getTypesMap(iconColor)
    console.log(typesMap)
    return <ItemCalendarWrapper>
            <CalendarIcon>{typesMap[type].icon}</CalendarIcon>
            <div style={{display: "flex", flexDirection: "column", gap: 4, flex:1}}>
                <div style={{display:"flex",gap:8}}>
                <CalendarDate>{date.format("DD MMM yyyy г.")}</CalendarDate>
                {
                    isCalculated && <div style={{color:"#999",fontSize:"14px",fontWeight:400,lineHeight:"normal"}}>(расчетное)</div>
                }
                </div>
                <div style={{borderBottom: timeHasExpired ? "3px dotted red" : "3px dotted #c6c6c6"}}/>
                {/* <CalendarLine/> */}
                <CalendarStatus>{typesMap[type].text}</CalendarStatus>
            </div>
        </ItemCalendarWrapper>
}

export default CalendarItem